<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Network.Client.Wallet</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Network.Client.Wallet.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-wallet-core-2020.5.6: The Wallet Backend for a Cardano node.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2020 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.Client.Wallet</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">ChainSyncFollowTip</a></li><li><a href="#g:2">ChainSyncWithBlocks</a></li><li><a href="#g:3">LocalTxSubmission</a></li><li><a href="#g:4">LocalStateQuery</a></li><li><a href="#g:5">Helpers</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Ouroboros mini-protocols clients for implementing cardano-wallet. These
 clients implement the logic and lift away concerns related to concrete
 data-type representation so that the code can be re-used / shared between
 Byron and Shelley.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:chainSyncFollowTip">chainSyncFollowTip</a> :: <span class="keyword">forall</span> m block. <a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (Tip block -&gt; m ()) -&gt; ChainSyncClient (Serialised block) (Tip block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ChainSyncCmd">ChainSyncCmd</a> block (m :: * -&gt; *)<ul class="subs"><li>= <a href="#v:CmdFindIntersection">CmdFindIntersection</a> [Point block] (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (Point block) -&gt; m ())</li><li>| <a href="#v:CmdNextBlocks">CmdNextBlocks</a> (<a href="Cardano-Wallet-Network.html#t:NextBlocksResult" title="Cardano.Wallet.Network">NextBlocksResult</a> (Point block) block -&gt; m ())</li></ul></li><li class="src short"><a href="#v:chainSyncWithBlocks">chainSyncWithBlocks</a> :: <span class="keyword">forall</span> m block. (<a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, MonadSTM m, HasHeader block) =&gt; (Tip block -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:BlockHeader" title="Cardano.Wallet.Primitive.Types">BlockHeader</a>) -&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:ChainSyncCmd" title="Ouroboros.Network.Client.Wallet">ChainSyncCmd</a> block m) -&gt; TQueue m (<a href="Cardano-Wallet-Network.html#t:NextBlocksResult" title="Cardano.Wallet.Network">NextBlocksResult</a> (Point block) block) -&gt; ChainSyncClientPipelined block (Tip block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LocalTxSubmissionCmd">LocalTxSubmissionCmd</a> tx err (m :: * -&gt; *) = <a href="#v:CmdSubmitTx">CmdSubmitTx</a> tx (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> err -&gt; m ())</li><li class="src short"><a href="#v:localTxSubmission">localTxSubmission</a> :: <span class="keyword">forall</span> m tx err. (MonadThrow m, MonadSTM m) =&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalTxSubmissionCmd" title="Ouroboros.Network.Client.Wallet">LocalTxSubmissionCmd</a> tx err m) -&gt; LocalTxSubmissionClient tx err m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LocalStateQueryCmd">LocalStateQueryCmd</a> block state (m :: * -&gt; *) = <a href="#v:CmdQueryLocalState">CmdQueryLocalState</a> (Point block) (Query block state) (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryResult" title="Ouroboros.Network.Client.Wallet">LocalStateQueryResult</a> state -&gt; m ())</li><li class="src short"><span class="keyword">type</span> <a href="#t:LocalStateQueryResult">LocalStateQueryResult</a> state = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> AcquireFailure state</li><li class="src short"><a href="#v:localStateQuery">localStateQuery</a> :: <span class="keyword">forall</span> m block state. (MonadThrow m, MonadSTM m) =&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryCmd" title="Ouroboros.Network.Client.Wallet">LocalStateQueryCmd</a> block state m) -&gt; LocalStateQueryClient block (Query block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></li><li class="src short"><a href="#v:send">send</a> :: MonadSTM m =&gt; TQueue m (cmd m) -&gt; ((a -&gt; m ()) -&gt; cmd m) -&gt; m a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>ChainSyncFollowTip</h1></a><div class="top"><p class="src"><a id="v:chainSyncFollowTip" class="def">chainSyncFollowTip</a> <a href="src/Ouroboros.Network.Client.Wallet.html#chainSyncFollowTip" class="link">Source</a> <a href="#v:chainSyncFollowTip" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (Tip block -&gt; m ())</td><td class="doc"><p>Callback for when the tip changes.</p></td></tr><tr><td class="src">-&gt; ChainSyncClient (Serialised block) (Tip block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Chain Sync' mini-protocol, which provides notifications
 when the node tip changes.</p><p>This is used in the same way as <code><a href="Ouroboros-Network-Client-Wallet.html#v:chainSyncWithBlocks" title="Ouroboros.Network.Client.Wallet">chainSyncWithBlocks</a></code>, except that only one
 of these clients is necessary, rather than one client per wallet.</p></div></div><a href="#g:2" id="g:2"><h1>ChainSyncWithBlocks</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainSyncCmd" class="def">ChainSyncCmd</a> block (m :: * -&gt; *) <a href="src/Ouroboros.Network.Client.Wallet.html#ChainSyncCmd" class="link">Source</a> <a href="#t:ChainSyncCmd" class="selflink">#</a></p><div class="doc"><p>We interact with the <code>NetworkClient</code> via a commands instrumenting the
 client to move within the state-machine protocol. Commands are sent from a
 parent thread via a shared <code>TQueue</code>.</p><p>MAIN THREAD                   | NETWORK CLIENT THREAD
                               |
     *---------------*         |
     |               |         |
     | Wallet Engine |         |
     |               |         |
     *---------------*         |
            |  ^               |
            v  |               |
     *---------------*         |        *----------------*
     |               |         |        |                |
     | Network Layer |<a href="===[">TQueue ]===</a>| Network Client |
     |               |         |        |                |
     *---------------*         |        *----------------*
                               |                |  ^
                               |                v  |
                               |     (ChainSync + TxSubmission)</p><p>The NetworkClient is idling most of the time and blocking on the TQueue while
 waiting for commands. Upon receiving a command, it interprets it by sending
 the corresponding instruction to the node and responding via a given
 callback.</p><p>See also <code><a href="Ouroboros-Network-Client-Wallet.html#v:send" title="Ouroboros.Network.Client.Wallet">send</a></code> for invoking commands.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CmdFindIntersection" class="def">CmdFindIntersection</a> [Point block] (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (Point block) -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CmdNextBlocks" class="def">CmdNextBlocks</a> (<a href="Cardano-Wallet-Network.html#t:NextBlocksResult" title="Cardano.Wallet.Network">NextBlocksResult</a> (Point block) block -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:chainSyncWithBlocks" class="def">chainSyncWithBlocks</a> <a href="src/Ouroboros.Network.Client.Wallet.html#chainSyncWithBlocks" class="link">Source</a> <a href="#v:chainSyncWithBlocks" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, MonadSTM m, HasHeader block)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (Tip block -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:BlockHeader" title="Cardano.Wallet.Primitive.Types">BlockHeader</a>)</td><td class="doc"><p>Convert an abstract tip to a concrete <code>BlockHeader</code></p><p>TODO: We probably need a better type for representing Tip as well!</p></td></tr><tr><td class="src">-&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:ChainSyncCmd" title="Ouroboros.Network.Client.Wallet">ChainSyncCmd</a> block m)</td><td class="doc"><p>We use a <code>TQueue</code> as a communication channel to drive queries from
 outside of the network client to the client itself.
 Requests are pushed to the queue which are then transformed into
 messages to keep the state-machine moving.</p></td></tr><tr><td class="src">-&gt; TQueue m (<a href="Cardano-Wallet-Network.html#t:NextBlocksResult" title="Cardano.Wallet.Network">NextBlocksResult</a> (Point block) block)</td><td class="doc"><p>An internal queue used for buffering responses collected while
 pipelining. As argument to simplify code below. Responses are first
 poped from this buffer if not empty, otherwise they'll simply trigger
 an exchange with the node.</p></td></tr><tr><td class="src">-&gt; ChainSyncClientPipelined block (Tip block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Chain Sync' mini-protocol.</p><p>Once started, the client simply runs ad-infinitum but one may
 interact with it via a <code>TQueue</code> of commands / messages used to move inside
 the state-machine.</p><p>In a typical usage, <code><a href="Ouroboros-Network-Client-Wallet.html#v:chainSyncWithBlocks" title="Ouroboros.Network.Client.Wallet">chainSyncWithBlocks</a></code> would be executed in a forked
 thread and given a <code>TQueue</code> over which the parent thread as control.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>forkIO $ void $ chainSyncWithBlocks tr queue channel
</code></strong>()
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeTQueue queue ...
</code></strong></pre><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle
     Server has agency*                | Intersect, Next</p><ul><li>A peer has agency if it is expected to send the next message.</li><li>-----------*
      | Intersect |&#9664;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;</li><li>-----------*         FindIntersect         &#9553;
            &#9474;                                     &#9553;
            &#9474;                                *---------*              *------*
            &#9474; Intersect.{Found,NotFound}     |         |&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9654;| Done |
            &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |   MsgDone    *------*
                                             |   Idle  |
         &#9556;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;|         |
         &#9553;            RequestNext            |         |&#8678; START
         &#9553;                                   *---------*
         &#9660;                                        &#9599;</li><li>------*       Roll.{Backward,Forward}      &#9474;
      | Next |&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;</li><li>------*</li></ul></div></div><a href="#g:3" id="g:3"><h1>LocalTxSubmission</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocalTxSubmissionCmd" class="def">LocalTxSubmissionCmd</a> tx err (m :: * -&gt; *) <a href="src/Ouroboros.Network.Client.Wallet.html#LocalTxSubmissionCmd" class="link">Source</a> <a href="#t:LocalTxSubmissionCmd" class="selflink">#</a></p><div class="doc"><p>Sending command to the localTxSubmission client. See also <code><a href="Ouroboros-Network-Client-Wallet.html#t:ChainSyncCmd" title="Ouroboros.Network.Client.Wallet">ChainSyncCmd</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CmdSubmitTx" class="def">CmdSubmitTx</a> tx (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> err -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:localTxSubmission" class="def">localTxSubmission</a> <a href="src/Ouroboros.Network.Client.Wallet.html#localTxSubmission" class="link">Source</a> <a href="#v:localTxSubmission" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (MonadThrow m, MonadSTM m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalTxSubmissionCmd" title="Ouroboros.Network.Client.Wallet">LocalTxSubmissionCmd</a> tx err m)</td><td class="doc"><p>We use a <code>TQueue</code> as a communication channel to drive queries from
 outside of the network client to the client itself.
 Requests are pushed to the queue which are then transformed into
 messages to keep the state-machine moving.</p></td></tr><tr><td class="src">-&gt; LocalTxSubmissionClient tx err m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Local Tx Submission' mini-protocol.</p><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle
     Server has agency*                | Busy
     * A peer has agency if it is expected to send the next message.</p><ul><li>-----------*
      |    Busy   |&#9664;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;</li><li>-----------*            SubmitTx           &#9553;
         &#9474;     &#9474;                                  &#9553;
         &#9474;     &#9474;                             *---------*              *------*
         &#9474;     &#9474;        AcceptTx             |         |&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9654;| Done |
         &#9474;     &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |   MsgDone    *------*
         &#9474;              RejectTx             |   Idle  |
         &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9596;|         |
                                             |         |&#8678; START</li><li>---------*</li></ul></div></div><a href="#g:4" id="g:4"><h1>LocalStateQuery</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LocalStateQueryCmd" class="def">LocalStateQueryCmd</a> block state (m :: * -&gt; *) <a href="src/Ouroboros.Network.Client.Wallet.html#LocalStateQueryCmd" class="link">Source</a> <a href="#t:LocalStateQueryCmd" class="selflink">#</a></p><div class="doc"><p>Command to send to the localStateQuery client. See also <code><a href="Ouroboros-Network-Client-Wallet.html#t:ChainSyncCmd" title="Ouroboros.Network.Client.Wallet">ChainSyncCmd</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CmdQueryLocalState" class="def">CmdQueryLocalState</a> (Point block) (Query block state) (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryResult" title="Ouroboros.Network.Client.Wallet">LocalStateQueryResult</a> state -&gt; m ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LocalStateQueryResult" class="def">LocalStateQueryResult</a> state = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> AcquireFailure state <a href="src/Ouroboros.Network.Client.Wallet.html#LocalStateQueryResult" class="link">Source</a> <a href="#t:LocalStateQueryResult" class="selflink">#</a></p><div class="doc"><p>Shorthand for the possible outcomes of acquiring local state parameters.</p></div></div><div class="top"><p class="src"><a id="v:localStateQuery" class="def">localStateQuery</a> <a href="src/Ouroboros.Network.Client.Wallet.html#localStateQuery" class="link">Source</a> <a href="#v:localStateQuery" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (MonadThrow m, MonadSTM m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; TQueue m (<a href="Ouroboros-Network-Client-Wallet.html#t:LocalStateQueryCmd" title="Ouroboros.Network.Client.Wallet">LocalStateQueryCmd</a> block state m)</td><td class="doc"><p>We use a <code>TQueue</code> as a communication channel to drive queries from
 outside of the network client to the client itself.
 Requests are pushed to the queue which are then transformed into
 messages to keep the state-machine moving.</p></td></tr><tr><td class="src">-&gt; LocalStateQueryClient block (Query block) m <a href="../base-4.12.0.0/Data-Void.html#t:Void" title="Data.Void">Void</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Client for the 'Local State Query' mini-protocol.</p><p>Agency
     -------------------------------------------------------------------------
     Client has agency*                | Idle, Acquired
     Server has agency*                | Acquiring, Querying
     * A peer has agency if it is expected to send the next message.</p><p>&#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;    Done      &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
        &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9654;&#9474;     Idle      &#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9654;&#9474;     Done      &#9474;
        &#9474;       &#9492;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;              &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
        &#9474;           &#9474;       &#9650;
        &#9474;   Acquire &#9474;       &#9474;
        &#9474;           &#9474;       &#9474; Failure
        &#9474;           &#9660;       &#9474;
        &#9474;       &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9488;              Result
        &#9474;       &#9474;   Acquiring   &#9474;&#9664;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
        &#9474;       &#9492;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;                      &#9474;
 Release&#9474;           &#9474;       &#9650;                          &#9474;
        &#9474;           &#9474;       &#9474;                          &#9474;
        &#9474;  Acquired &#9660;       &#9474; ReAcquire                &#9474;
        &#9474;       &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9488;             &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
        &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9508;   Acquired    &#9474;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&gt;&#9474;   Querying     &#9474;
                &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;             &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;</p></div></div><a href="#g:5" id="g:5"><h1>Helpers</h1></a><div class="top"><p class="src"><a id="v:send" class="def">send</a> :: MonadSTM m =&gt; TQueue m (cmd m) -&gt; ((a -&gt; m ()) -&gt; cmd m) -&gt; m a <a href="src/Ouroboros.Network.Client.Wallet.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><div class="doc"><p>Helper function to easily send commands to the node's client and read
 responses back.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>queue `send` CmdNextBlocks
</code></strong>RollForward cursor nodeTip blocks
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>queue `send` CmdNextBlocks
</code></strong>AwaitReply
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>